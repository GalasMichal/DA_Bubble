
<div class="chat-content">
 @if(!hideDetails ){
  <app-time-separator [userDate]="userMessage" class="full-width"></app-time-separator>
 }
  <div class="user-message-container" [ngClass]="{'user-message-container-right': meUser}">
    <app-reaction-bar class="reaction-bar" [ngClass]="{'reaction-bar-right': meUser}" [index]="index" (emojiSelected)="onEmojiSelected($event)"></app-reaction-bar>
    <img class="avatar" src={{userMessage.messageSendBy.avatarUrl}} alt="profil-image"/>

    <div class="message-content" [ngClass]="{'message-content-right': meUser}">
      <div class="message-container">

        <div class="user-time" [ngClass]="{'user-time-right': meUser}">
          <h2> {{userMessage.messageSendBy.displayName}}</h2>
          <span>{{ userMessage.timestamp.toDate() | date: 'H:mm' }} Uhr</span>
        </div>

        <div class="messages-main-chat" [ngClass]="{'messages-main-chat-right': meUser}">{{userMessage.text}}
        </div>

        <div class="answer-container">
          <div (click)="openThread()" class="answer">{{userMessage.time}}</div>
          @if (!hideDetails) {
            <div class="time-stamp">{{userMessage.lastAnswer}}</div>
          } @else {
            <div class="line-separator"></div>
          }
        </div>
      </div>

      <div class="emoijReaction">
        @for( emoji of userMessage.reactions; track emojis[index]) {
          <button class="single-emoij">{{emoji.symbol}} {{emoji.count}}
            <app-reaction-cloud
            [name]="emoji.userName"
            [symbol]="emoji.symbol"
            ></app-reaction-cloud>
          </button>
        }

      </div>
  </div>

  </div>
</div>
